<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8/>
    <title>ImageOverlay with georeferenced scanned map</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no'/>
    <script src='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css' rel='stylesheet'/>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #date {
            position: absolute;
            z-index: 10;
            height: 18px;
            background-color: white;
            left:0;
            right: 0;
            text-align: center;
        }
        
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>
<div id='map'></div>
<div id="date"><span id="dateText"></span></div>
<script>
    const files = [
        "rainradar_20180315_000001.png",
        "rainradar_20180315_000501.png",
        "rainradar_20180315_001001.png",
        "rainradar_20180315_001501.png",
        "rainradar_20180315_002001.png",
        "rainradar_20180315_002501.png",
        "rainradar_20180315_003001.png",
        "rainradar_20180315_003501.png",
        "rainradar_20180315_004001.png",
        "rainradar_20180315_004501.png",
        "rainradar_20180315_005001.png",
        "rainradar_20180315_005501.png",
        "rainradar_20180315_010001.png",
        "rainradar_20180315_010501.png",
        "rainradar_20180315_011001.png",
        "rainradar_20180315_011501.png",
        "rainradar_20180315_012001.png",
        "rainradar_20180315_012501.png",
        "rainradar_20180315_013001.png",
        "rainradar_20180315_013501.png",
        "rainradar_20180315_014001.png",
        "rainradar_20180315_014501.png",
        "rainradar_20180315_015001.png",
        "rainradar_20180315_015501.png",
        "rainradar_20180315_020001.png",
        "rainradar_20180315_020501.png",
        "rainradar_20180315_021001.png",
        "rainradar_20180315_021501.png",
        "rainradar_20180315_022001.png",
        "rainradar_20180315_022501.png",
        "rainradar_20180315_023001.png",
        "rainradar_20180315_023501.png",
        "rainradar_20180315_024001.png",
        "rainradar_20180315_024501.png",
        "rainradar_20180315_025001.png",
        "rainradar_20180315_025502.png",
        "rainradar_20180315_030002.png",
        "rainradar_20180315_030501.png",
        "rainradar_20180315_031001.png",
        "rainradar_20180315_031501.png",
        "rainradar_20180315_032001.png",
        "rainradar_20180315_032501.png",
        "rainradar_20180315_033001.png",
        "rainradar_20180315_033501.png",
        "rainradar_20180315_034001.png",
        "rainradar_20180315_034501.png",
        "rainradar_20180315_035001.png",
        "rainradar_20180315_035501.png",
        "rainradar_20180315_040001.png",
        "rainradar_20180315_040501.png",
        "rainradar_20180315_041001.png",
        "rainradar_20180315_041501.png",
        "rainradar_20180315_042001.png",
        "rainradar_20180315_042501.png",
        "rainradar_20180315_043001.png",
        "rainradar_20180315_043501.png",
        "rainradar_20180315_044001.png",
        "rainradar_20180315_044501.png",
        "rainradar_20180315_045001.png",
        "rainradar_20180315_045501.png",
        "rainradar_20180315_050001.png",
        "rainradar_20180315_050501.png",
        "rainradar_20180315_051001.png",
        "rainradar_20180315_051501.png",
        "rainradar_20180315_052001.png",
        "rainradar_20180315_052501.png",
        "rainradar_20180315_053001.png",
        "rainradar_20180315_053501.png",
        "rainradar_20180315_054001.png",
        "rainradar_20180315_054501.png",
        "rainradar_20180315_055001.png",
        "rainradar_20180315_055501.png",
        "rainradar_20180315_060001.png",
        "rainradar_20180315_060501.png",
        "rainradar_20180315_061001.png",
        "rainradar_20180315_061501.png",
        "rainradar_20180315_062001.png",
        "rainradar_20180315_062501.png",
        "rainradar_20180315_063001.png",
        "rainradar_20180315_063501.png",
        "rainradar_20180315_064001.png",
        "rainradar_20180315_064501.png",
        "rainradar_20180315_065001.png",
        "rainradar_20180315_065501.png",
        "rainradar_20180315_070001.png",
        "rainradar_20180315_070501.png",
        "rainradar_20180315_071001.png",
        "rainradar_20180315_071501.png",
        "rainradar_20180315_072001.png",
        "rainradar_20180315_072501.png",
        "rainradar_20180315_073001.png",
        "rainradar_20180315_073501.png",
        "rainradar_20180315_074001.png",
        "rainradar_20180315_074501.png",
        "rainradar_20180315_075001.png",
        "rainradar_20180315_075502.png",
        "rainradar_20180315_080001.png",
        "rainradar_20180315_080501.png",
        "rainradar_20180315_081001.png",
        "rainradar_20180315_081501.png",
        "rainradar_20180315_082001.png",
        "rainradar_20180315_082501.png",
        "rainradar_20180315_083001.png",
        "rainradar_20180315_083501.png",
        "rainradar_20180315_084001.png",
        "rainradar_20180315_084501.png",
        "rainradar_20180315_085001.png",
        "rainradar_20180315_085501.png",
        "rainradar_20180315_090001.png",
        "rainradar_20180315_090501.png",
        "rainradar_20180315_091001.png",
        "rainradar_20180315_091502.png",
        "rainradar_20180315_092001.png",
        "rainradar_20180315_092501.png",
        "rainradar_20180315_093001.png",
        "rainradar_20180315_093501.png",
        "rainradar_20180315_094001.png",
        "rainradar_20180315_094501.png",
        "rainradar_20180315_095001.png",
        "rainradar_20180315_095501.png",
        "rainradar_20180315_100001.png",
        "rainradar_20180315_100501.png",
        "rainradar_20180315_101001.png",
        "rainradar_20180315_101501.png",
        "rainradar_20180315_102001.png",
        "rainradar_20180315_102501.png",
        "rainradar_20180315_103001.png",
        "rainradar_20180315_103501.png",
        "rainradar_20180315_104001.png",
        "rainradar_20180315_104501.png",
        "rainradar_20180315_105001.png",
        "rainradar_20180315_105501.png",
        "rainradar_20180315_110001.png",
        "rainradar_20180315_110501.png",
        "rainradar_20180315_111001.png",
        "rainradar_20180315_111501.png",
        "rainradar_20180315_112001.png",
        "rainradar_20180315_112501.png",
        "rainradar_20180315_113001.png",
        "rainradar_20180315_113501.png",
        "rainradar_20180315_114001.png",
        "rainradar_20180315_114501.png",
        "rainradar_20180315_115001.png",
        "rainradar_20180315_115501.png",
        "rainradar_20180315_120001.png",
        "rainradar_20180315_120501.png",
        "rainradar_20180315_121001.png",
        "rainradar_20180315_121501.png",
        "rainradar_20180315_122001.png",
        "rainradar_20180315_122501.png",
        "rainradar_20180315_123001.png",
        "rainradar_20180315_123501.png",
        "rainradar_20180315_124001.png",
        "rainradar_20180315_124501.png",
        "rainradar_20180315_125001.png",
        "rainradar_20180315_125501.png",
        "rainradar_20180315_130001.png",
        "rainradar_20180315_130501.png",
        "rainradar_20180315_131001.png",
        "rainradar_20180315_131501.png",
        "rainradar_20180315_132001.png",
        "rainradar_20180315_132501.png",
        "rainradar_20180315_133001.png",
        "rainradar_20180315_133501.png",
        "rainradar_20180315_134001.png",
        "rainradar_20180315_134501.png",
        "rainradar_20180315_135001.png",
        "rainradar_20180315_135501.png",
        "rainradar_20180315_140001.png",
        "rainradar_20180315_140501.png",
        "rainradar_20180315_141001.png",
        "rainradar_20180315_141501.png",
        "rainradar_20180315_142001.png",
        "rainradar_20180315_142501.png",
        "rainradar_20180315_143001.png",
        "rainradar_20180315_143501.png",
        "rainradar_20180315_144001.png",
        "rainradar_20180315_144501.png",
        "rainradar_20180315_145001.png",
        "rainradar_20180315_145501.png",
        "rainradar_20180315_150001.png",
        "rainradar_20180315_150501.png",
        "rainradar_20180315_151001.png",
        "rainradar_20180315_151501.png",
        "rainradar_20180315_152001.png",
        "rainradar_20180315_152501.png",
        "rainradar_20180315_153001.png",
        "rainradar_20180315_153501.png",
        "rainradar_20180315_154001.png",
        "rainradar_20180315_154501.png",
        "rainradar_20180315_155001.png",
        "rainradar_20180315_155501.png",
        "rainradar_20180315_160001.png",
        "rainradar_20180315_160501.png",
        "rainradar_20180315_161001.png",
        "rainradar_20180315_161501.png",
        "rainradar_20180315_162001.png",
        "rainradar_20180315_162501.png",
        "rainradar_20180315_163001.png",
        "rainradar_20180315_163501.png",
        "rainradar_20180315_164001.png",
        "rainradar_20180315_164501.png",
        "rainradar_20180315_165001.png",
        "rainradar_20180315_165501.png",
        "rainradar_20180315_170001.png",
        "rainradar_20180315_170501.png",
        "rainradar_20180315_171001.png",
        "rainradar_20180315_171501.png",
        "rainradar_20180315_172001.png",
        "rainradar_20180315_172501.png",
        "rainradar_20180315_173001.png",
        "rainradar_20180315_173501.png",
        "rainradar_20180315_174001.png",
        "rainradar_20180315_174501.png",
        "rainradar_20180315_175001.png",
        "rainradar_20180315_175501.png",
        "rainradar_20180315_180001.png",
        "rainradar_20180315_180502.png",
        "rainradar_20180315_181001.png",
        "rainradar_20180315_181501.png",
        "rainradar_20180315_182001.png",
        "rainradar_20180315_182501.png",
        "rainradar_20180315_183001.png",
        "rainradar_20180315_183501.png",
        "rainradar_20180315_184001.png",
        "rainradar_20180315_184501.png",
        "rainradar_20180315_185001.png",
        "rainradar_20180315_185501.png",
        "rainradar_20180315_190001.png",
        "rainradar_20180315_190501.png",
        "rainradar_20180315_191001.png",
        "rainradar_20180315_191501.png",
        "rainradar_20180315_192001.png",
        "rainradar_20180315_192501.png",
        "rainradar_20180315_193001.png",
        "rainradar_20180315_193501.png",
        "rainradar_20180315_194001.png",
        "rainradar_20180315_194501.png",
        "rainradar_20180315_195001.png",
        "rainradar_20180315_195501.png",
        "rainradar_20180315_200001.png",
        "rainradar_20180315_200501.png",
        "rainradar_20180315_201001.png",
        "rainradar_20180315_201501.png",
        "rainradar_20180315_202001.png",
        "rainradar_20180315_202501.png",
        "rainradar_20180315_203001.png",
        "rainradar_20180315_203502.png",
        "rainradar_20180315_204001.png",
        "rainradar_20180315_204501.png",
        "rainradar_20180315_205001.png",
        "rainradar_20180315_205501.png",
        "rainradar_20180315_210001.png",
        "rainradar_20180315_210501.png",
        "rainradar_20180315_211001.png",
        "rainradar_20180315_211501.png",
        "rainradar_20180315_212001.png",
        "rainradar_20180315_212501.png",
        "rainradar_20180315_213001.png",
        "rainradar_20180315_213501.png",
        "rainradar_20180315_214001.png",
        "rainradar_20180315_214501.png",
        "rainradar_20180315_215001.png",
        "rainradar_20180315_215501.png",
        "rainradar_20180315_220001.png",
        "rainradar_20180315_220501.png",
        "rainradar_20180315_221001.png",
        "rainradar_20180315_221501.png",
        "rainradar_20180315_222001.png",
        "rainradar_20180315_222501.png",
        "rainradar_20180315_223001.png",
        "rainradar_20180315_223501.png",
        "rainradar_20180315_224001.png",
        "rainradar_20180315_224501.png",
        "rainradar_20180315_225001.png",
        "rainradar_20180315_225501.png",
        "rainradar_20180315_230001.png",
        "rainradar_20180315_230501.png",
        "rainradar_20180315_231001.png",
        "rainradar_20180315_231501.png",
        "rainradar_20180315_232001.png",
        "rainradar_20180315_232501.png",
        "rainradar_20180315_233001.png",
        "rainradar_20180315_233501.png",
        "rainradar_20180315_234001.png",
        "rainradar_20180315_234501.png",
        "rainradar_20180315_235001.png",
        "rainradar_20180315_235501.png",
        "rainradar_20180316_000001.png",
        "rainradar_20180316_000501.png",
        "rainradar_20180316_001001.png",
        "rainradar_20180316_001501.png",
        "rainradar_20180316_002001.png",
        "rainradar_20180316_002501.png",
        "rainradar_20180316_003001.png",
        "rainradar_20180316_003501.png",
        "rainradar_20180316_004001.png",
        "rainradar_20180316_004501.png",
        "rainradar_20180316_005001.png",
        "rainradar_20180316_005501.png",
        "rainradar_20180316_010001.png",
        "rainradar_20180316_010501.png",
        "rainradar_20180316_011001.png",
        "rainradar_20180316_011501.png",
        "rainradar_20180316_012001.png",
        "rainradar_20180316_012501.png",
        "rainradar_20180316_013001.png",
        "rainradar_20180316_013501.png",
        "rainradar_20180316_014001.png",
        "rainradar_20180316_014501.png",
        "rainradar_20180316_015001.png",
        "rainradar_20180316_015501.png",
        "rainradar_20180316_020001.png",
        "rainradar_20180316_020501.png",
        "rainradar_20180316_021001.png",
        "rainradar_20180316_021501.png",
        "rainradar_20180316_022001.png",
        "rainradar_20180316_022501.png",
        "rainradar_20180316_023001.png",
        "rainradar_20180316_023501.png",
        "rainradar_20180316_024001.png",
        "rainradar_20180316_024501.png",
        "rainradar_20180316_025001.png",
        "rainradar_20180316_025501.png",
        "rainradar_20180316_030001.png",
        "rainradar_20180316_030501.png",
        "rainradar_20180316_031001.png",
        "rainradar_20180316_031501.png",
        "rainradar_20180316_032001.png",
        "rainradar_20180316_032501.png",
        "rainradar_20180316_033001.png",
        "rainradar_20180316_033501.png",
        "rainradar_20180316_034001.png",
        "rainradar_20180316_034501.png",
        "rainradar_20180316_035001.png",
        "rainradar_20180316_035501.png",
        "rainradar_20180316_040001.png",
        "rainradar_20180316_040501.png",
        "rainradar_20180316_041001.png",
        "rainradar_20180316_041501.png",
        "rainradar_20180316_042001.png",
        "rainradar_20180316_042501.png",
        "rainradar_20180316_043001.png",
        "rainradar_20180316_043501.png",
        "rainradar_20180316_044001.png",
        "rainradar_20180316_044501.png",
        "rainradar_20180316_045001.png",
        "rainradar_20180316_045501.png",
        "rainradar_20180316_050001.png",
        "rainradar_20180316_050501.png",
        "rainradar_20180316_051001.png",
        "rainradar_20180316_051501.png",
        "rainradar_20180316_052001.png",
        "rainradar_20180316_052501.png",
        "rainradar_20180316_053001.png",
        "rainradar_20180316_053501.png",
        "rainradar_20180316_054001.png",
        "rainradar_20180316_054501.png",
        "rainradar_20180316_055001.png",
        "rainradar_20180316_055501.png",
        "rainradar_20180316_060001.png",
        "rainradar_20180316_060501.png",
        "rainradar_20180316_061001.png",
        "rainradar_20180316_061501.png",
        "rainradar_20180316_062001.png",
        "rainradar_20180316_062501.png",
        "rainradar_20180316_063001.png",
        "rainradar_20180316_063501.png",
        "rainradar_20180316_064001.png",
        "rainradar_20180316_064501.png",
        "rainradar_20180316_065001.png",
        "rainradar_20180316_065501.png",
        "rainradar_20180316_070001.png",
        "rainradar_20180316_070501.png",
        "rainradar_20180316_071001.png",
        "rainradar_20180316_071501.png",
        "rainradar_20180316_072001.png",
        "rainradar_20180316_072501.png",
        "rainradar_20180316_073001.png",
        "rainradar_20180316_073501.png",
        "rainradar_20180316_074001.png",
        "rainradar_20180316_074501.png",
        "rainradar_20180316_075001.png",
        "rainradar_20180316_075501.png",
        "rainradar_20180316_080001.png",
        "rainradar_20180316_080501.png",
        "rainradar_20180316_081001.png",
        "rainradar_20180316_081501.png",
        "rainradar_20180316_082001.png",
        "rainradar_20180316_082501.png",
        "rainradar_20180316_083001.png",
        "rainradar_20180316_083501.png",
        "rainradar_20180316_084001.png",
        "rainradar_20180316_084501.png",
        "rainradar_20180316_085001.png",
        "rainradar_20180316_085501.png",
        "rainradar_20180316_090001.png",
        "rainradar_20180316_090501.png",
        "rainradar_20180316_091001.png",
        "rainradar_20180316_091501.png",
        "rainradar_20180316_092001.png",
        "rainradar_20180316_092501.png",
        "rainradar_20180316_093001.png",
        "rainradar_20180316_093501.png",
        "rainradar_20180316_094001.png",
        "rainradar_20180316_094501.png",
        "rainradar_20180316_095001.png",
        "rainradar_20180316_095501.png",
        "rainradar_20180316_100001.png",
        "rainradar_20180316_100501.png",
        "rainradar_20180316_101001.png",
        "rainradar_20180316_101501.png",
        "rainradar_20180316_102001.png",
        "rainradar_20180316_102501.png",
        "rainradar_20180316_103001.png",
        "rainradar_20180316_103501.png",
        "rainradar_20180316_104001.png",
        "rainradar_20180316_104501.png",
        "rainradar_20180316_105001.png",
        "rainradar_20180316_105501.png",
        "rainradar_20180316_110001.png",
        "rainradar_20180316_110501.png",
        "rainradar_20180316_111001.png",
        "rainradar_20180316_111501.png",
        "rainradar_20180316_112001.png",
        "rainradar_20180316_112501.png",
        "rainradar_20180316_113001.png",
        "rainradar_20180316_113501.png",
        "rainradar_20180316_114001.png",
        "rainradar_20180316_114501.png",
        "rainradar_20180316_115001.png",
        "rainradar_20180316_115501.png",
        "rainradar_20180316_120001.png",
        "rainradar_20180316_120501.png",
        "rainradar_20180316_121001.png",
        "rainradar_20180316_121501.png",
        "rainradar_20180316_122001.png",
        "rainradar_20180316_122501.png",
        "rainradar_20180316_123001.png",
        "rainradar_20180316_123501.png",
        "rainradar_20180316_124001.png",
        "rainradar_20180316_124501.png",
        "rainradar_20180316_125001.png",
        "rainradar_20180316_125501.png",
        "rainradar_20180316_130001.png",
        "rainradar_20180316_130501.png",
        "rainradar_20180316_131001.png",
        "rainradar_20180316_131501.png",
        "rainradar_20180316_132001.png",
        "rainradar_20180316_132501.png",
        "rainradar_20180316_133001.png",
        "rainradar_20180316_133501.png",
        "rainradar_20180316_134001.png",
        "rainradar_20180316_134501.png",
        "rainradar_20180316_135001.png",
        "rainradar_20180316_135501.png",
        "rainradar_20180316_140001.png",
        "rainradar_20180316_140501.png",
        "rainradar_20180316_141001.png",
        "rainradar_20180316_141501.png",
        "rainradar_20180316_142001.png",
        "rainradar_20180316_142501.png",
        "rainradar_20180316_143001.png",
        "rainradar_20180316_143501.png",
        "rainradar_20180316_144001.png",
        "rainradar_20180316_144501.png",
        "rainradar_20180316_145001.png",
        "rainradar_20180316_145501.png",
        "rainradar_20180316_150001.png",
        "rainradar_20180316_150501.png",
        "rainradar_20180316_151001.png",
        "rainradar_20180316_151501.png",
        "rainradar_20180316_152001.png",
        "rainradar_20180316_152501.png",
        "rainradar_20180316_153001.png",
        "rainradar_20180316_153501.png",
        "rainradar_20180316_154001.png",
        "rainradar_20180316_154501.png",
        "rainradar_20180316_155001.png",
        "rainradar_20180316_155501.png",
        "rainradar_20180316_160001.png",
        "rainradar_20180316_160501.png",
        "rainradar_20180316_161001.png",
        "rainradar_20180316_161501.png",
        "rainradar_20180316_162001.png",
        "rainradar_20180316_162501.png",
        "rainradar_20180316_163001.png",
        "rainradar_20180316_163501.png",
        "rainradar_20180316_164001.png",
        "rainradar_20180316_164501.png",
        "rainradar_20180316_165001.png",
        "rainradar_20180316_165501.png",
        "rainradar_20180316_170001.png",
        "rainradar_20180316_170501.png",
        "rainradar_20180316_171001.png",
        "rainradar_20180316_171501.png",
        "rainradar_20180316_172001.png",
        "rainradar_20180316_172501.png",
        "rainradar_20180316_173001.png",
        "rainradar_20180316_173501.png",
        "rainradar_20180316_174001.png",
        "rainradar_20180316_174501.png",
        "rainradar_20180316_175001.png",
        "rainradar_20180316_175501.png",
        "rainradar_20180316_180001.png",
        "rainradar_20180316_180501.png",
        "rainradar_20180316_181001.png",
        "rainradar_20180316_181501.png",
        "rainradar_20180316_182001.png",
        "rainradar_20180316_182501.png",
        "rainradar_20180316_183001.png",
        "rainradar_20180316_183501.png",
        "rainradar_20180316_184001.png",
        "rainradar_20180316_184501.png",
        "rainradar_20180316_185001.png",
        "rainradar_20180316_185501.png",
        "rainradar_20180316_190001.png",
        "rainradar_20180316_190501.png",
        "rainradar_20180316_191002.png",
        "rainradar_20180316_191501.png",
        "rainradar_20180316_192001.png",
        "rainradar_20180316_192501.png",
        "rainradar_20180316_193001.png",
        "rainradar_20180316_193501.png",
        "rainradar_20180316_194001.png",
        "rainradar_20180316_194501.png",
        "rainradar_20180316_195001.png",
        "rainradar_20180316_195501.png",
        "rainradar_20180316_200001.png",
        "rainradar_20180316_200501.png",
        "rainradar_20180316_201001.png",
        "rainradar_20180316_201501.png",
        "rainradar_20180316_202001.png",
        "rainradar_20180316_202501.png",
        "rainradar_20180316_203001.png",
        "rainradar_20180316_203501.png",
        "rainradar_20180316_204001.png",
        "rainradar_20180316_204501.png",
        "rainradar_20180316_205001.png",
        "rainradar_20180316_205501.png",
        "rainradar_20180316_210001.png",
        "rainradar_20180316_210501.png",
        "rainradar_20180316_211001.png",
        "rainradar_20180316_211501.png",
        "rainradar_20180316_212001.png",
        "rainradar_20180316_212501.png",
        "rainradar_20180316_213001.png",
        "rainradar_20180316_213501.png",
        "rainradar_20180316_214001.png",
        "rainradar_20180316_214502.png",
        "rainradar_20180316_215001.png",
        "rainradar_20180316_215501.png",
        "rainradar_20180316_220001.png",
        "rainradar_20180316_220501.png",
        "rainradar_20180316_221001.png",
        "rainradar_20180316_221501.png",
        "rainradar_20180316_222001.png",
        "rainradar_20180316_222501.png",
        "rainradar_20180316_223002.png",
        "rainradar_20180316_223501.png",
        "rainradar_20180316_224001.png",
        "rainradar_20180316_224501.png",
        "rainradar_20180316_225001.png",
        "rainradar_20180316_225501.png",
        "rainradar_20180316_230001.png",
        "rainradar_20180316_230501.png",
        "rainradar_20180316_231001.png",
        "rainradar_20180316_231501.png",
        "rainradar_20180316_232001.png",
        "rainradar_20180316_232501.png",
        "rainradar_20180316_233001.png",
        "rainradar_20180316_233501.png",
        "rainradar_20180316_234001.png",
        "rainradar_20180316_234501.png",
        "rainradar_20180316_235001.png",
        "rainradar_20180316_235501.png",
        "rainradar_20180317_000001.png",
        "rainradar_20180317_000501.png",
        "rainradar_20180317_001001.png",
        "rainradar_20180317_001501.png",
        "rainradar_20180317_002001.png",
        "rainradar_20180317_002501.png",
        "rainradar_20180317_003001.png",
        "rainradar_20180317_003501.png",
        "rainradar_20180317_004001.png",
        "rainradar_20180317_004501.png",
        "rainradar_20180317_005001.png",
        "rainradar_20180317_005501.png",
        "rainradar_20180317_010001.png",
        "rainradar_20180317_010501.png",
        "rainradar_20180317_011001.png",
        "rainradar_20180317_011501.png",
        "rainradar_20180317_012001.png",
        "rainradar_20180317_012501.png",
        "rainradar_20180317_013001.png",
        "rainradar_20180317_013501.png",
        "rainradar_20180317_014001.png",
        "rainradar_20180317_014501.png",
        "rainradar_20180317_015001.png",
        "rainradar_20180317_015501.png",
        "rainradar_20180317_020001.png",
        "rainradar_20180317_020501.png",
        "rainradar_20180317_021001.png",
        "rainradar_20180317_021501.png",
        "rainradar_20180317_022002.png",
        "rainradar_20180317_022501.png",
        "rainradar_20180317_023001.png",
        "rainradar_20180317_023501.png",
        "rainradar_20180317_024001.png",
        "rainradar_20180317_024501.png",
        "rainradar_20180317_025001.png",
        "rainradar_20180317_025501.png",
        "rainradar_20180317_030001.png",
        "rainradar_20180317_030501.png",
        "rainradar_20180317_031001.png",
        "rainradar_20180317_031501.png",
        "rainradar_20180317_032001.png",
        "rainradar_20180317_032501.png",
        "rainradar_20180317_033001.png",
        "rainradar_20180317_033501.png",
        "rainradar_20180317_034001.png",
        "rainradar_20180317_034501.png",
        "rainradar_20180317_035001.png",
        "rainradar_20180317_035501.png",
        "rainradar_20180317_040001.png",
        "rainradar_20180317_040501.png",
        "rainradar_20180317_041001.png",
        "rainradar_20180317_041501.png",
        "rainradar_20180317_042001.png",
        "rainradar_20180317_042501.png",
        "rainradar_20180317_043001.png",
        "rainradar_20180317_043501.png",
        "rainradar_20180317_044002.png",
        "rainradar_20180317_044501.png",
        "rainradar_20180317_045001.png",
        "rainradar_20180317_045501.png",
        "rainradar_20180317_050001.png",
        "rainradar_20180317_050501.png",
        "rainradar_20180317_051001.png",
        "rainradar_20180317_051502.png",
        "rainradar_20180317_052001.png",
        "rainradar_20180317_052501.png",
        "rainradar_20180317_053001.png",
        "rainradar_20180317_053501.png",
        "rainradar_20180317_054001.png",
        "rainradar_20180317_054501.png",
        "rainradar_20180317_055001.png",
        "rainradar_20180317_055501.png",
        "rainradar_20180317_060001.png",
        "rainradar_20180317_060501.png",
        "rainradar_20180317_061001.png",
        "rainradar_20180317_061501.png",
        "rainradar_20180317_062001.png",
        "rainradar_20180317_062501.png",
        "rainradar_20180317_063001.png",
        "rainradar_20180317_063501.png",
        "rainradar_20180317_064001.png",
        "rainradar_20180317_064501.png",
        "rainradar_20180317_065001.png",
        "rainradar_20180317_065501.png",
        "rainradar_20180317_070001.png",
        "rainradar_20180317_070501.png",
        "rainradar_20180317_071001.png",
        "rainradar_20180317_071501.png",
        "rainradar_20180317_072001.png",
        "rainradar_20180317_072501.png",
        "rainradar_20180317_073001.png",
        "rainradar_20180317_073501.png",
        "rainradar_20180317_074001.png",
        "rainradar_20180317_074501.png",
        "rainradar_20180317_075001.png",
        "rainradar_20180317_075501.png",
        "rainradar_20180317_080001.png",
        "rainradar_20180317_080501.png",
        "rainradar_20180317_081001.png",
        "rainradar_20180317_081501.png",
        "rainradar_20180317_082001.png",
        "rainradar_20180317_082501.png",
        "rainradar_20180317_083001.png",
        "rainradar_20180317_083501.png",
        "rainradar_20180317_084001.png",
        "rainradar_20180317_084501.png",
        "rainradar_20180317_085001.png",
        "rainradar_20180317_085501.png",
        "rainradar_20180317_090001.png",
        "rainradar_20180317_090501.png",
        "rainradar_20180317_091002.png",
        "rainradar_20180317_091501.png",
        "rainradar_20180317_092001.png",
        "rainradar_20180317_092501.png",
        "rainradar_20180317_093001.png",
        "rainradar_20180317_093501.png",
        "rainradar_20180317_094001.png",
        "rainradar_20180317_094501.png",
        "rainradar_20180317_095001.png",
        "rainradar_20180317_095501.png",
        "rainradar_20180317_100001.png",
        "rainradar_20180317_100501.png",
        "rainradar_20180317_101001.png",
        "rainradar_20180317_101501.png",
        "rainradar_20180317_102001.png",
        "rainradar_20180317_102501.png",
        "rainradar_20180317_103001.png",
        "rainradar_20180317_103501.png",
        "rainradar_20180317_104001.png",
        "rainradar_20180317_104501.png",
        "rainradar_20180317_105001.png",
        "rainradar_20180317_105501.png",
        "rainradar_20180317_110001.png",
        "rainradar_20180317_110501.png",
        "rainradar_20180317_111001.png",
        "rainradar_20180317_111501.png"
    ];

    const dateOutput = document.getElementById("dateText");

    L.mapbox.accessToken = 'pk.eyJ1Ijoibml0ZWdhdGUiLCJhIjoiY2l4ejFxc2d6MDA1aDJxbzc5bjZrMzI0ZyJ9.EEPEOLNhdFz9DVNx4TCvBw';
    let counter = 0;
    var imageUrl = "lastdays/" + files[counter],
        // This is the trickiest part - you'll need accurate coordinates for the
        // corners of the image. You can find and create appropriate values at
        // http://maps.nypl.org/warper/ or
        // http://www.georeferencer.org/
        imageBounds = L.latLngBounds([
            [46.95257828070096, 3.5889323545584633],
            [54.74054512217148, 15.72075796095801]]);

    var map = L.mapbox.map('map', 'mapbox.streets')
        .fitBounds(imageBounds);
    map.on("layeradd", (event) => {
        console.log("event:", event);
    });

    // See full documentation for the ImageOverlay type:
    // http://leafletjs.com/reference.html#imageoverlay
    var overlay = L.imageOverlay(imageUrl, imageBounds)
        .addTo(map);

    const dateFilePattern = /rainradar_(\d\d\d\d)(\d\d)(\d\d)_(\d\d)(\d\d)\d\d.*/;

    
    function loadNextImage() {
        if (counter > files.length - 1) {
            counter = 0;
        }
        const newFile = files[++counter];

        const downloadingImage = new Image();
        downloadingImage.src = newFile;
        downloadingImage.onload = function(){
            const matches = dateFilePattern.exec(newFile);
            if (matches) {
                dateOutput.innerHTML = matches[4] + ":" + matches[5] + " - " + matches[3] + "." + matches[2] + "." + matches[1];
            }
            overlay.setUrl("lastdays/" + newFile);
            setTimeout(loadNextImage, 100)
        };
        downloadingImage.onerror = function() {
            setTimeout(loadNextImage, 100)
        }        
    }

    setTimeout(loadNextImage, 100);
    
</script>
</body>
</html>